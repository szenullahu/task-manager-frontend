<div class="container mt-5">
  <div class="edit-card">
    <h4 class="mb-3">Change Password</h4>
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="row g-3">
      <!-- Old Password -->
      <div class="col-12">
        <label class="form-label">Current Password</label>
        <input
          type="password"
          class="form-control"
          formControlName="oldPassword"
          [class.is-invalid]="form.get('oldPassword')?.invalid && form.get('oldPassword')?.touched"
        />
        @if (form.get('oldPassword')?.errors?.['required']) {
          <div class="invalid-feedback">
            Current password is required.
          </div>
        }
      </div>
      <!-- New Password -->
      <div class="col-12">
        <label class="form-label">New Password</label>
        <input
          type="password"
          class="form-control"
          formControlName="newPassword"
          [class.is-invalid]="form.get('newPassword')?.invalid && form.get('newPassword')?.touched"
        />
        @if (form.get('newPassword')?.errors?.['required']) {
          <div class="invalid-feedback">New password is required.</div>
        }
        @if (form.get('newPassword')?.errors?.['minlength']) {
          <div class="invalid-feedback">Password must be at least 8 characters.</div>
        }
      </div>
      <!-- Confirm New Password -->
      <div class="col-12">
        <label class="form-label">Confirm New Password</label>
        <input
          type="password"
          class="form-control"
          formControlName="confirmNewPassword"
          [class.is-invalid]="
            form.get('confirmNewPassword')?.touched &&
            (form.get('confirmNewPassword')?.invalid || form.errors?.['mismatch'])
            "
        />
        @if (form.get('confirmNewPassword')?.errors?.['required']) {
          <div class="invalid-feedback">Please confirm your new password.</div>
        }
        @if (form.get('confirmNewPassword')?.errors?.['minlength']) {
          <div class="invalid-feedback">Password must be at least 8 characters.</div>
        }
        @if (form.errors?.['mismatch']) {
          <div class="invalid-feedback">Passwords do not match.</div>
        }
      </div>
      <!-- Submit -->
      <div class="col-12 d-flex justify-content-end gap-2">
        <a class="btn btn-outline-secondary" routerLink="/me">Cancel</a>
        <button class="btn btn-outline-primary" type="submit" [disabled]="form.invalid">
          Change Password
        </button>
      </div>
    </form>
  </div>
</div>
